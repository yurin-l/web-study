<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="./main.css"/>
</head>
<body>
    <div class="container" id="container">
        <h3 id="title">간단한 todo-list</h3>
        <div id="sub-container">
            <ul class="list-group" id="list-group">
                <li class="list-group-item d-flex justify-content-between align-items-center" id="list-group-item">
                오늘의 할 일 목록
                <span class="badge rounded-pill" id="delete-button" onclick="deleteItem(this)">삭제</span>
                </li>
            </ul>
        </div>
            <div class="input-group mb-3" id="input-group">
                <input type="text" class="form-control" id="input-area">
                <div class="input-group-append">
                <button class="btn btn-outline-secondary" type="button" id="button-area" onclick="addItem()">추가</button>
            </div>
        </div>
    </div>
<script>
    // 항목 추가 함수
    function addItem() {
        const input = document.getElementById('input-area');
        const listGroup = document.getElementById('list-group');

        // 입력값이 비어 있지 않을 때만 추가
        if (input.value.trim() !== "") {
            const newItem = document.createElement('li');
            newItem.className = "list-group-item d-flex justify-content-between align-items-center";
            newItem.innerHTML = `
                ${input.value}
                <span class="badge text-bg-primary rounded-pill" onclick="deleteItem(this)">삭제</span>
            `;
            listGroup.appendChild(newItem);
            input.value = ""; // 입력 필드 초기화
        } else {
            alert("할 일을 입력하세요!"); // 입력값이 없을 경우 경고
        }
    }

    // 항목 삭제 함수
    function deleteItem(element) {
        element.parentElement.remove();
    }

    //IME(입력기) 상태 확인 변수
    let isComposing = false;

    // IME 조합 시작 이벤트
    document.getElementById('input-area').addEventListener('compositionstart', function() {
        isComposing = true; // 조합 중 상태 설정
    });

    // IME 조합 완료 이벤트
    document.getElementById('input-area').addEventListener('compositionend', function() {
        isComposing = false; // 조합 완료 상태 설정
    });


    // 엔터 키로 항목 추가하기
    document.getElementById('input-area').addEventListener('keydown', function(event) {
        if (event.key === 'Enter' && !isComposing) { // 조합 중이 아닐 때만 동작
            event.preventDefault(); // 기본 동작 방지
            addItem();
        }
    });

    // 엔터 키로 항목 추가하기
    // document.getElementById('input-area').addEventListener('keydown', function(event) {
    // if (event.key === 'Enter') { // Enter 키 확인
    //     event.preventDefault();
    //     addItem();
    // }
    // });
</script>
</body>
</html>  